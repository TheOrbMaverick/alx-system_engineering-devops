#!/usr/bin/env bash
# Build Docker image from Dockerfile in the current directory

# Check if Docker is installed
if ! command -v docker &> /dev/null; then
    echo "Docker is not installed. Please install Docker to proceed."
    exit 1
fi

# Build Docker image with tag 'my-apache-image'
docker build -t my-apache-image .

# Check if the build was successful
if [ $? -ne 0 ]; then
    echo "Error: Docker build failed."
    exit 1
fi

# Run Docker container mapping host port 8080 to container port 80
docker run -p 8080:80 -d my-apache-image

# Check if the container is running
if [ $? -ne 0 ]; then
    echo "Error: Failed to start Docker container."
    exit 1
fi

echo "Docker container 'my-apache-image' started successfully."