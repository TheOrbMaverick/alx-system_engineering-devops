#!/usr/bin/env bash
# This script builds a Docker image for Apache serving a custom index.html.

# Check if Docker is installed
if ! command -v docker &> /dev/null; then
    echo "Error: Docker is not installed. Please install Docker to proceed."
    exit 1
fi

# Create a custom index.html file with Hello Holberton content
echo "Hello Holberton" > index.html

# Create a Dockerfile to configure Apache to serve the custom index.html
cat <<EOF > Dockerfile
FROM httpd:latest
COPY index.html /usr/local/apache2/htdocs/
EOF

# Build Docker image with tag 'my-apache-image' using Dockerfile in the current directory
docker build -t my-apache-image . || {
    echo "Error: Docker build failed."
    exit 1
}

# Run Docker container mapping host port 8080 to container port 80
docker run -p 8080:80 -d my-apache-image || {
    echo "Error: Failed to start Docker container."
    exit 1
}

echo "Docker container 'my-apache-image' started successfully."